{% extends 'base.html' %}
{% load static %}

{% block title %}{{ service.title }} - サービス詳細{% endblock %}

{% block extra_head %}
{# Google Fontsの読み込み（base.htmlに記載済みなら不要） #}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
{% endblock %}

{% block page_css %}
<link rel="stylesheet" href="{% static 'css/index.css' %}" />
<link rel="stylesheet" href="{% static 'css/service_detail.css' %}?v={{ css_timestamp }}" />
{% endblock %}

{% block content %}
<div class="service-detail-page">
  <nav class="breadcrumbs" aria-label="breadcrumb">
    <ol>
      <li><a href="{% url 'homepage:home' %}">ホーム</a></li>
      <li><a href="{% url 'service:list' %}">サービス一覧</a></li>
      <li><span aria-current="page">{{ service.title }}</span></li>
    </ol>
  </nav>

  <main class="detail-container">

    <section class="product-header">
      
      <div class="product-gallery">
        {% if service.main_image %}
          <img src="{{ service.main_image.url }}" alt="{{ service.title }} メイン画像" class="main-image" id="mainImage">
        {% else %}
          <div class="no-image"><span>画像がありません</span></div>
        {% endif %}
        
        <div class="thumbnail-list">
          {% if service.main_image %}
            <img src="{{ service.main_image.url }}" alt="サムネイル1" class="thumbnail-item active">
          {% endif %}
          {% for sub_image in service.sub_images.all %}
            <img src="{{ sub_image.url }}" alt="サムネイル{{ forloop.counter|add:1 }}" class="thumbnail-item">
          {% endfor %}
        </div>
      </div>
  
      <div class="product-info">
        <span class="category-tag">{{ service.category.name }}</span>
        <h1 class="product-title">{{ service.title }}</h1>
        
        <div class="price-box">
          <div class="price-label">初期費用<span class="price-note">（税込）</span></div>
          {% if service.is_campaign_target and service.campaign_price %}
            <div class="price-container">
              <span class="original-price">{{ service.price }}</span>
              <span class="campaign-price price-amount">{{ service.campaign_price }}</span>
            </div>
          {% else %}
            <span class="price-amount">{{ service.price }}</span>
          {% endif %}
          
          {% if service.monthly_info %}
            <p class="monthly-fee">{{ service.monthly_info }}</p>
          {% endif %}
        </div>
        
        <ul class="feature-list">
          <li><i class="fas fa-check-circle"></i>最短2週間で納品可能</li>
          <li><i class="fas fa-headset"></i>安心の月額サポート付き</li>
          <li><i class="fas fa-laptop-code"></i>オンラインミーティングで完結</li>
        </ul>
        
        <div class="action-panel">
          <p class="action-lead">ご相談・お見積りは無料です。お気軽にお問い合わせください。</p>
          <a href="https://reang-reserve.jp/tenant/reservation/" class="cta-button">
            今すぐ無料相談する
            <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </a>
        </div>
      </div>
  
    </section>
  
    <section class="product-content-body">
      
      <div class="content-section">
        <h2 class="section-title">サービスの詳細</h2>
        <div class="section-content">
          {{ service.description_rich|safe }}
        </div>
      </div>
  
      <div class="content-section">
        <h2 class="section-title">導入の流れ</h2>
        <div class="section-content">
          {{ service.flow_rich|safe }}
        </div>
      </div>
  
    </section>

    <section class="content-section">
      <h2 class="section-title">よくあるご質問</h2>
      <div class="faq-accordion">
        <div class="accordion-item">
          <button class="accordion-trigger" aria-expanded="false">
            <span class="accordion-title">Q. 契約前に相談だけでも可能ですか？</span>
            <span class="accordion-icon" aria-hidden="true"></span>
          </button>
          <div class="accordion-content">
            <p>A. はい、もちろん可能です。初回のご相談・お見積りは完全に無料ですので、まずはお気軽にお問い合わせください。</p>
          </div>
        </div>
        <div class="accordion-item">
          <button class="accordion-trigger" aria-expanded="false">
            <span class="accordion-title">Q. 制作期間はどれくらいかかりますか？</span>
            <span class="accordion-icon" aria-hidden="true"></span>
          </button>
          <div class="accordion-content">
            <p>A. 制作するサービスの規模や内容によって変動しますが、平均して1ヶ月〜3ヶ月程度が目安となります。詳細なスケジュールはヒアリング後にお伝えします。</p>
          </div>
        </div>
      </div>
    </section>
  
  </main>
</div>
<script src="{% static 'js/service_detail.js' %}"></script>
{% endblock %}